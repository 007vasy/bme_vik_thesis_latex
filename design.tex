%----------------------------------------------------------------------------
\chapter{Design}
%----------------------------------------------------------------------------
\section{CAN fingerprint data set processing method}
%----------------------------------------------------------------------------
\subsection{Requirement specification}
%----------------------------------------------------------------------------
	\noindent
The final aim was to create data processing methods and calculated attributes from measured values for future prediction applications.
%----------------------------------------------------------------------------
	\subsubsection{Starting state}
The start state was a raw CAN bus physical sensory data in a *.mat format with different measurement frequencies by sensor types.
%----------------------------------------------------------------------------
	\subsubsection{Final state}
		\noindent
To achieve the final state, data sets require to transform to an CSV (Comma Separate Value) or RDS (R Data Structure) format for more convenient handling and calculating attributes.
		\noindent
The attributes are aggregations and summarization of connection between key values originating from expert knowledge, exploratory data analysis and several unsupervised learning technique.
%----------------------------------------------------------------------------
\subsubsection{Abstract Workflow}
To accomplish the final state from the starting state, the process was partitioned from on start-to-end into smaller steps. 

\begin{enumerate}
	\item {Cleaning:} To solve different measurement frequency problem by making a one-row/one-observation data frame.
	\item {Exploring:} Investigating the data with exploratory data analysis tools and unsupervised learning supported by the STILL workers's, engineers's and my acquaintances's expert knowledge.
 	\item {Specifying Attributes:} To introduce sustainable attribute calculating algorithms.
 	\item {Calculating RUL (Remaining useful life):} From received goal values (few tire measurement) and from the attributes calculated beforehand, present a RUL calculating algoritm for the MANTIS project.
\end{enumerate}

\begin{figure}[!ht]
\centering
\includegraphics[width=150mm, keepaspectratio]{figures/abstract_workflow.png}
\caption{Abstract workflow from raw data to final objective} 
\end{figure}

%----------------------------------------------------------------------------
\subsection{Expert knowledge and facts}
%----------------------------------------------------------------------------
\noindent
When some kind of industrial data set is examined and processed to make educated guess about the future principles and insights from expert knowledge are really helpful to make sense and understand the data in a higher sense.\footnote{In reality the vast majority of the insight came from exploratory data analysis and unsupervised learning}

\noindent
In summary, the main indicators of tire abrasion are between two tire measurement:
\begin{itemise}
	\item{traveled distance } 
	\item{elapsed time between}
	\item{elapsed time in high torque low speed state}
	\item{changing x direction in elapsed time}
	\item{changing y direction in elapsed time}
\end{itemise}

These aggregated values can be calculated from the raw sensor data, and from data with enough tire measurement point the RUL can be calculated with a help of a built statistical model.

%----------------------------------------------------------------------------
\subsection{Data processing workflow design}
%----------------------------------------------------------------------------
\cite{CSDISTILLED}
\cite{DATACAMP}	
\cite{LeanThinking}
	\subsubsection{Cleaning}
		\paragraph{Idea One}
			\begin{figure}[!ht]
			\centering
			\includegraphics[width=150mm, keepaspectratio]{figures/cleaning_idea_one.png}
			\caption{First idea to clean the raw data} 
			\end{figure}
		\paragraph{Idea Two}
			\begin{figure}[!ht]
			\centering
			\includegraphics[width=150mm, keepaspectratio]{figures/cleaning_idea_two.png}
			\caption{Second idea to read the raw data} 
			\end{figure}
		\paragraph{Idea Synthesis}
			\begin{figure}[!ht]
			\centering
			\includegraphics[width=150mm, keepaspectratio]{figures/cleaning_idea_synthesis.png}
			\caption{To optimize the cleaning workflow, merged the to processes together} 
			\end{figure}
	\subsubsection{Exploring}
	explain why is it useful to do in a broader sense
		\paragraph{Exploratory data analysis}
			explain why is it useful to do
			\subparagraph{Data summaries}
			enumerate data summary methods
			\subparagraph{Visualization}
			enumerate data visualization methods
		\paragraph{Unsupervised learning}
		explain what is it 
		enumerate some types
	\subsubsection{Specifying Attributes}
	from expert knowledge
	\subsubsection{Calculating RUL (Remaining useful life)}
	explain red flag in short
	calc what from what and why core principle and desired outcome framework abstract path to that
		\begin{figure}[!ht]
		\centering
		\includegraphics[width=150mm, keepaspectratio]{figures/CAN_fingerprint_RUL_calculation.png}
		\caption{Calculating RUL from cleaned data} 
		\end{figure}	
%----------------------------------------------------------------------------
%----------------------------------------------------------------------------
\section{Electrical fail prediction data set processing method}
%----------------------------------------------------------------------------
	\subsection{Requirement specification}
%----------------------------------------------------------------------------
From raw data and later described warning sequence from a random truck, the model have to estimate the remaining useful life from the exchange part ID possibilities.	
%----------------------------------------------------------------------------
	\subsection{Data processing workflow design}
%----------------------------------------------------------------------------
\cite{BALNWSCBOOK}
\cite{CSDISTILLED}
\cite{DATACAMP}
\cite{LeanThinking}
		\subsubsection{Cleaning}
		\begin{figure}[!ht]
		\centering
		\includegraphics[width=150mm, keepaspectratio]{figures/Electrical_fail_prediction_preprocessing_workflow.png}
		\caption{To optimize the cleaning workflow, merged the to processes together} 
		\end{figure}
		One have get rid of the resource wasting, fiddling values, and extract the can be useful columns. After that the graph building values can be selected.

		There is two group of the data:
		Nodes
		Edges

%----------------------------------------------------------------------------
		\subsubsection{Exploring}
		With visualization
%----------------------------------------------------------------------------
		\subsubsection{Calculating RUL}
explain and reason the validity of the whole method
		explain red flag in short
		\begin{figure}[!ht]
		\centering
		\includegraphics[width=150mm, keepaspectratio]{figures/Calc_Fault_pred_RUL.png}
		\caption{To optimise the cleaning workflow, merged the to processes together} 
		\end{figure}
		Nodes: possible warnings and exchange part ID-s
		Edges truck ID, timestamp warning or exchange part ID
		form that we build a graph and with the given sequence we looking for the truck has similar path after that, from the last node of the sequence calculate possibility paths all of the exchange part ID-s. We display it with avg, min max mean time frame and calced path possibility.